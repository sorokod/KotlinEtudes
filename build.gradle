import org.jetbrains.kotlin.gradle.tasks.KotlinCompilationTask

import static org.jetbrains.kotlin.gradle.dsl.KotlinVersion.KOTLIN_1_9

plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.9.23'
    id 'java'
}

ext {
    java_version = 21
    junit_version = "5.9.0"
    kotest_version = "5.8.1"
}


allprojects {
    apply plugin: 'java'
    apply plugin: 'kotlin'


    group 'org.xor'
    version '1.0-SNAPSHOT'


    repositories {
        mavenCentral()
    }

    java {
        sourceCompatibility = java_version
    }

    compileKotlin {
        kotlinOptions.jvmTarget = java_version
    }
    compileTestKotlin {
        kotlinOptions.jvmTarget = java_version
    }
    test {
        useJUnitPlatform()
    }

    task printAllDependencies(type: DependencyReportTask) {}


//    kotlin {
//        compilerOptions {
//            languageVersion.set(KOTLIN_1_9)
//            apiVersion.set(KOTLIN_1_9)
//        }
//    }

    tasks.withType(KotlinCompilationTask.class)
            .configureEach {compilerOptions.languageVersion = KOTLIN_1_9}

    dependencies {
        //see settings.gradle
        implementation(libs.commons.math3)
        implementation(libs.kotest.runner.junit5)
        implementation(libs.kotest.assertions.core.jvm)
        implementation(libs.kotest.property)
        implementation(libs.kotest.framework.datatest)
    }
}
